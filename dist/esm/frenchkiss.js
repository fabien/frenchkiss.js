/**
 * @license @atelierfabien/frenchkiss 0.2.2
 * Copyright (c) 2018-2020 Koala Interactive, Inc.
 * License: MIT
 */
const t=/^\s*\w+\s*$/,e=/^\s*(\w+)\s*,\s*(select|plural)\s*,/i,n=JSON.stringify,s=t=>'(p["'+t+'"]||(p["'+t+'"]=="0"?0:"'+t+'" in p?"":v("'+t+'",k,l)))';function o(t){const e={},o=function t(e,o){const l=[];const c=e.length;for(let r=0;r<c;++r){const c=e[r],f=c[0],i=c[1];let u="";if(0===f&&i)u=n(i);else if(1===f)u=s(i.trim());else if(2===f){const e=c[2],s=c[3],l=c[4],r=s.length;for(let c=0;c<r;++c)l?"="===s[c][0][0]?u+='p["'+e+'"]=='+n(s[c][0].substr(1)):(o[e]=1,u+='m["'+e+'"]=='+n(s[c][0])):u+='p["'+e+'"]=='+n(s[c][0]),u+="?"+t(s[c][1],o)+":";u="("+u+t(i,o)+")"}u&&l.push(u)}return l.join("+")||'""'}(l(t),e),c=Object.keys(e),r=c.length,f=[];for(let t=0;t<r;++t)f[t]=c[t]+':f(p["'+c[t]+'"])';return Function("a","f","k","l","v","var p=a||{}"+(r?",m=f?{"+f+"}:{}":"")+";return "+o)}function l(n){let s=0,o="";const l=n.length,r=[];for(let f=0;f<l;++f){const l=n[f];let i;"{"===l?s++||(i=[0,o]):"}"===l&&(--s||(i=t.test(o)?[1,o]:e.test(o)?c(o):[0,o])),i?(r.push(i),o=""):o+=l}return r.push([0,o]),r}function c(t){const n=t.match(e),s=n[1],o="p"===n[2][0].toLowerCase(),c=l(t.replace(e,"")),r=c.length,f=[];let i=[0,""];for(let t=0;t<r-1;){let e=c[t++][1].trim();const n=l(c[t++][1]);"other"===e?i=n:o&&"="===e[0]?f.unshift([e,n]):f.push([e,n])}return[2,i,s,f,o]}export default function(t){t=Object.assign({},t);const e={};let n={},s="",l="",c=t=>t,r=()=>"";const f=(n,s)=>e[s]&&e[s][n]||t[s]&&"string"==typeof t[s][n]&&(e[s][n]=o(t[s][n])),i=(t,e,n)=>{const s=Object.keys(e),o=s.length;for(let l=0;l<o;++l){const o=s[l],c=n+o;"object"==typeof e[o]?(i(t,e[o],c+"."),delete t[o]):t[c]=e[o]+""}},u=(t,e,n,s)=>{const o=Object.keys(n),l=o.length;for(let c=0;c<l;++c){const l=o[c],r=s+l;"object"==typeof n[l]?u(t,e,n[l],r+"."):t[r]!==n[l]&&(delete e[r],t[r]=n[l]+"")}};return{cache:e,store:t,t:(t,e,o)=>{let i,u=o||s;return u&&(i=f(t,u))?i(e,n[u],t,u,r):(u=l)&&(i=f(t,u))?i(e,n[u],t,u,r):c(t,e,o||s)},onMissingKey:t=>{c=t},onMissingVariable:t=>{r=t},locale:t=>(t&&(s=t),s),fallback:t=>(t&&(l=t),l),set:(n,s)=>{i(s,s,""),e[n]={},t[n]=s},unset:n=>{delete e[n],delete t[n]},extend:(n,s)=>{t[n]||(t[n]={}),e[n]||(e[n]={}),u(t[n],e[n],s,"")},plural:(t,e)=>{n[t]=e}}}
